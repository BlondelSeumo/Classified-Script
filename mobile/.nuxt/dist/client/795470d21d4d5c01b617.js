(window.webpackJsonp=window.webpackJsonp||[]).push([[123],{648:function(t,e,r){"use strict";r.r(e);r(84),r(45);var n,o,l=r(26),c={middleware:"auth",layout:"default/main",asyncData:(o=Object(l.a)(regeneratorRuntime.mark((function t(e){var r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$axios,n=e.params,o=e.query,t.next=3,r.post("account/deals/promote",{id:n.id,package:o.package});case 3:return l=t.sent,t.abrupt("return",{packages:l.data.packages,deal:l.data.deal,seo:{title:l.data.seo.title,separator:l.data.seo.separator,description:l.data.seo.description,favicon:l.data.seo.favicon}});case 5:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)}),data:function(){return{stripe:{image:null,name:null,description:null,currency:null,amount:null},selected:null,loading:!1,pageLoaded:!1}},head:function(){return{title:this.$t("t_promote_your_deal"),titleTemplate:"%s ".concat(this.seo.separator," ").concat(this.seo.title),meta:[{name:"description",content:this.seo.description},{name:"robots",content:"noindex, nofollow"}],link:[{rel:"icon",type:"image/x-icon",href:this.seo.favicon}]}},watch:{current:{handler:function(object){this.select(object)},deep:!0}},methods:{select:function(t){this.selected=t.id,this.stripe.image=this.preview(this.deal),this.stripe.name=this.$t("t_promote_your_deal"),this.stripe.description=t.title,this.stripe.currency=t.currency,this.stripe.amount=100*t.price,this.$nextTick((function(){this.checkout()}))},checkout:(n=Object(l.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.checkout.open();case 2:(e=t.sent).token,e.args;case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),done:function(t){var e=this,r=t.token;t.args;this.loading=!0,this.$axios.post("account/deals/promote/checkout",{id:this.deal.unique_id,package:this.selected,token:r.id}).then((function(t){"paid"===t.data.status&&(e.$toasted.show(e.$t("t_toasted_payment_made"),{icon:"done_all",className:e.$vuetify.rtl?"toasted-rtl":""}),e.$router.push("/account/deals")),e.loading=!1})).catch((function(t){"failed"===t.response.data.status?e.$toasted.error(e.$t("t_toasted_payment_failed"),{icon:"error",className:e.$vuetify.rtl?"toasted-rtl":""}):e.$toasted.error(e.$t("t_toasted_something_went_wrong"),{icon:"error",className:e.$vuetify.rtl?"toasted-rtl":""}),e.loading=!1}))},opened:function(){},closed:function(){},canceled:function(){},preview:function(t){return 0===t.photosNumber?this.$homeApi("storage/app/uploads/default/classifieds/no-image.png"):this.$homeApi("storage/app/uploads/classifieds/"+t.unique_id+"/preview_0.jpg")},avatar:function(t){return null===t?this.$homeApi("storage/app/uploads/default/avatar/noavatar.png"):this.$homeApi("storage/app/"+t)}}},d=r(52),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"inspire"}},[r("v-overlay",{attrs:{opacity:"0.8"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[r("v-progress-circular",{attrs:{indeterminate:"",size:"80",width:"4",color:"white"}},[t._v("\n\t\t\t\t"+t._s(t.$t("t_loading"))+"\n\t\t\t")])],1),t._v(" "),r("v-content",[r("v-container",{attrs:{"grid-list-xl":"",fluid:""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-card",{staticClass:"m-card",class:t.deal.isUpgraded&&"highlight"===t.deal.upgradedTo?"deal-highlight":""},[r("nuxt-link",{staticStyle:{position:"absolute",height:"100%",width:"100%"},attrs:{to:"/listing/"+t.deal.unique_slug}}),t._v(" "),r("v-container",{attrs:{fluid:"","grid-list-xl":""}},[r("v-layout",[r("v-flex",{attrs:{xs4:""}},[r("v-img",{attrs:{src:t.preview(t.deal),height:"80px",contain:""},on:{click:function(e){return t.$router.push("/listing/"+t.deal.unique_slug)}}})],1),t._v(" "),r("v-flex",{staticClass:"pr-4 pl-0",attrs:{xs8:""}},[r("v-card-title",{staticClass:"pa-0",attrs:{"primary-title":""}},[r("div",[r("div",{staticClass:"deal-title"},[t.deal.isUpgraded&&"urgent"===t.deal.upgradedTo?r("span",{staticClass:"deal-urgent"},[t._v(t._s(t.$t("t_urgent")))]):t._e(),t._v(" "+t._s(t.deal.title))]),t._v(" "),r("div",{staticClass:"deal-description"},[t._v(t._s(t.$description(t.deal.description)))])])])],1)],1)],1),t._v(" "),r("v-divider",{attrs:{light:""}}),t._v(" "),r("v-card-actions",{staticClass:"py-0 px-2"},[r("v-list-item",{staticClass:"grow deal-avatar"},[r("v-list-item-avatar",{attrs:{size:"25px"}},[r("v-img",{attrs:{src:t.avatar(t.deal.user.avatar)}})],1),t._v(" "),r("v-list-item-content",[r("v-list-item-title",{staticClass:"deal-username"},[t._v(t._s(t.deal.user.username))])],1),t._v(" "),r("v-layout",{staticStyle:{"margin-bottom":"14px"},attrs:{"align-center":"","justify-end":""}},[t.deal.price&&t.deal.currency&&t.deal.locale?r("span",{staticClass:"deal-price"},[t._v(t._s(t.$getCurrency(t.deal.price,t.deal.currency,t.deal.locale)))]):t._e()])],1)],1)],1)],1),t._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-container",{staticClass:"pa-0",attrs:{"grid-list-xl":""}},[r("v-layout",{attrs:{row:""}},t._l(t.packages,(function(p,e){return r("v-flex",{key:e,attrs:{xs6:""}},[r("v-card",{staticClass:"cursor-pointer pt-3",class:t.selected===p.id?"selected-package":"",staticStyle:{"box-shadow":"0px 1px 1px rgba(0, 0, 0, 0.08)"},attrs:{flat:"",color:t.selected===p.id?"#878d8b":t.$vuetify.theme.dark?"#3a3939":"white"}},[r("v-icon",{directives:[{name:"show",rawName:"v-show",value:p.id===t.selected,expression:"p.id === selected"}],staticStyle:{position:"absolute",top:"10px",right:"10px"},attrs:{size:"16px",color:"white"},on:{click:function(e){t.selected=null}}},[t._v("mdi-close")]),t._v(" "),r("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-icon",t._g({directives:[{name:"show",rawName:"v-show",value:t.selected!==p.id,expression:"selected !== p.id"}],staticStyle:{position:"absolute",top:"10px",left:"10px"},attrs:{size:"16px",color:"#7a7a7a"},on:{click:function(e){t.selected=null}}},n),[t._v("mdi-information-variant")])]}}],null,!0)},[t._v(" "),r("span",[t._v(t._s(p.title))])]),t._v(" "),r("v-card-title",{staticClass:"layout justify-center pb-4",attrs:{"primary-title":""},on:{click:function(e){return t.select(p)}}},[r("v-chip",{directives:[{name:"show",rawName:"v-show",value:"highlight"===p.type,expression:"p.type === 'highlight'"}],attrs:{small:"",label:"",color:"amber lighten-4","text-color":"amber darken-2"}},[t._v(t._s(t.$t("t_highlight")))]),t._v(" "),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:"urgent"===p.type,expression:"p.type === 'urgent'"}],attrs:{small:"",label:"",color:"red lighten-4","text-color":"red darken-2"}},[t._v(t._s(t.$t("t_urgent")))]),t._v(" "),r("v-chip",{directives:[{name:"show",rawName:"v-show",value:"featured"===p.type,expression:"p.type === 'featured'"}],attrs:{small:"",label:"",color:"light-green lighten-4","text-color":"light-green darken-2"}},[t._v(t._s(t.$t("t_featured")))])],1),t._v(" "),r("v-card-text",{staticClass:"text-center pb-0",on:{click:function(e){return t.select(p)}}},[r("span",{staticClass:"package-price pb-3",staticStyle:{display:"block","font-family":"'Open sans',sans-serif","font-size":"16px!important","letter-spacing":"1px","font-weight":"700"}},[t._v(t._s(t.$getCurrency(p.price,p.currency,p.locale)))]),t._v(" "),r("div",{staticClass:"grey--text"},[r("span",{staticClass:"package-days",staticStyle:{"font-family":"Hind,sans-serif","font-weight":"500","text-transform":"uppercase","font-size":"10px","letter-spacing":"1px",color:"#595959"}},[t._v(t._s(t._f("numeralFormat")(p.days))+" days")]),r("br"),t._v(" "),r("br")])])],1)],1)})),1)],1)],1)],1)],1),t._v(" "),r("vue-stripe-checkout",{ref:"checkout",attrs:{image:t.stripe.image,name:t.stripe.name,description:t.stripe.description,currency:t.stripe.currency,amount:t.stripe.amount,"allow-remember-me":!0},on:{done:t.done,opened:t.opened,closed:t.closed,canceled:t.canceled}})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);