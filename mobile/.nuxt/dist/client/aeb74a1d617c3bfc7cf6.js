(window.webpackJsonp=window.webpackJsonp||[]).push([[140],{659:function(t,e,n){"use strict";n.r(e);n(45);var o,r,c=n(26),l={layout:"default/main",middleware:"auth",asyncData:(r=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$axios,o=e.params,t.next=3,n.post("pricing/checkout/".concat(o.plan));case 3:return r=t.sent,t.abrupt("return",{plan:r.data.plan,seo:{title:r.data.seo.title,separator:r.data.seo.separator,description:r.data.seo.description,favicon:r.data.seo.favicon}});case 5:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)}),data:function(){return{dontClose:!1,loading:!0}},head:function(){return{title:this.plan.title,titleTemplate:"%s ".concat(this.seo.separator," ").concat(this.seo.title),meta:[{name:"description",content:this.plan.description},{name:"robots",content:"index, follow"}],link:[{rel:"icon",type:"image/x-icon",href:this.seo.favicon}]}},computed:{amount:function(){return 100*this.plan.price}},methods:{checkout:(o=Object(c.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.checkoutRef.open();case 2:(e=t.sent).token,e.args;case 5:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)}),done:function(t){var e=this,n=t.token;t.args;this.dontClose=!0,this.loading=!0,this.$axios.post("subscription/create/account",{token:n,plan:this.plan.slug}).then((function(t){"paid"===t.data.status&&(e.$toasted.show(e.$t("t_toasted_upgrade_requires_review"),{icon:"done_all",className:e.$vuetify.rtl?"toasted-rtl":""}),e.$router.push({name:"mainIndex"})),e.loading=!1})).catch((function(t){"not_found"===t.response.data.status?e.$toasted.error(e.$t("t_toasted_plan_not_found"),{icon:"error",className:e.$vuetify.rtl?"toasted-rtl":""}):"failed"===t.response.data.status?e.$toasted.error(e.$t("t_toasted_payment_failed"),{icon:"error",className:e.$vuetify.rtl?"toasted-rtl":""}):e.$toasted.error(e.$t("t_toasted_something_went_wrong"),{icon:"error",className:e.$vuetify.rtl?"toasted-rtl":""}),e.loading=!1}))},opened:function(){this.loading=!1},closed:function(){this.dontClose||this.$router.push({name:"mainPricing"})},canceled:function(){this.$router.push({name:"mainPricing"})}}},d=n(52),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("v-overlay",{attrs:{opacity:"0.8"},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"80",width:"4",color:"white"}},[t._v("\n\t\t\t\t"+t._s(t.$t("t_loading"))+"\n\t\t\t")])],1),t._v(" "),n("v-content",[n("vue-stripe-checkout",{ref:"checkoutRef",attrs:{image:!!t.plan.icon&&t.$homeApi("storage/app/"+t.plan.icon),name:t.plan.title,description:t.plan.description,currency:t.plan.currency,amount:t.amount,"allow-remember-me":!0,"auto-open-modal":!0},on:{done:t.done,opened:t.opened,closed:t.closed,canceled:t.canceled}})],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);